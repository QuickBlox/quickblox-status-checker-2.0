/*!
 * Pikaday
 *
 * Copyright Â© 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
 */
(function(a,b){var d;if(typeof exports==="object"){try{d=require("moment")}catch(c){}module.exports=b(d)}else{if(typeof define==="function"&&define.amd){define(function(e){var f="moment";d=e.defined&&e.defined(f)?e(f):undefined;return b(d)})}else{a.Pikaday=b(a.moment)}}}(this,function(A){var j=typeof A==="function",d=!!window.addEventListener,p=window.document,t=window.setTimeout,r=function(F,G,H,E){if(d){F.addEventListener(G,H,!!E)}else{F.attachEvent("on"+G,H)}},v=function(F,G,H,E){if(d){F.removeEventListener(G,H,!!E)}else{F.detachEvent("on"+G,H)}},D=function(F,E,H){var G;if(p.createEvent){G=p.createEvent("HTMLEvents");G.initEvent(E,true,false);G=x(G,H);F.dispatchEvent(G)}else{if(p.createEventObject){G=p.createEventObject();G=x(G,H);F.fireEvent("on"+E,G)}}},w=function(E){return E.trim?E.trim():E.replace(/^\s+|\s+$/g,"")},a=function(E,F){return(" "+E.className+" ").indexOf(" "+F+" ")!==-1},m=function(E,F){if(!a(E,F)){E.className=(E.className==="")?F:E.className+" "+F}},n=function(E,F){E.className=w((" "+E.className+" ").replace(" "+F+" "," "))},l=function(E){return(/Array/).test(Object.prototype.toString.call(E))},B=function(E){return(/Date/).test(Object.prototype.toString.call(E))&&!isNaN(E.getTime())},g=function(E){return E%4===0&&E%100!==0||E%400===0},c=function(E,F){return[31,g(E)?29:28,31,30,31,30,31,31,30,31,30,31][F]},z=function(E){if(B(E)){E.setHours(0,0,0,0)}},q=function(F,E){return F.getTime()===E.getTime()},x=function(I,H,E){var G,F;for(G in H){F=I[G]!==undefined;if(F&&typeof H[G]==="object"&&H[G].nodeName===undefined){if(B(H[G])){if(E){I[G]=new Date(H[G].getTime())}}else{if(l(H[G])){if(E){I[G]=H[G].slice(0)}}else{I[G]=x({},H[G],E)}}}else{if(E||!F){I[G]=H[G]}}}return I},i=function(E){if(E.month<0){E.year-=Math.ceil(Math.abs(E.month)/12);E.month+=12}if(E.month>11){E.year+=Math.floor(Math.abs(E.month)/12);E.month-=12}return E},k={field:null,bound:undefined,position:"bottom left",format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:false,firstDay:0,minDate:null,maxDate:null,yearRange:10,showWeekNumber:false,minYear:0,maxYear:9999,minMonth:undefined,maxMonth:undefined,isRTL:false,yearSuffix:"",showMonthAfterYear:false,numberOfMonths:1,mainCalendar:"left",container:undefined,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onDraw:null},C=function(G,E,F){E+=G.firstDay;while(E>=7){E-=7}return F?G.i18n.weekdaysShort[E]:G.i18n.weekdays[E]},u=function(K,F,L,H,I,G,J){if(J){return'<td class="is-empty"></td>'}var E=[];if(G){E.push("is-disabled")}if(I){E.push("is-today")}if(H){E.push("is-selected")}return'<td data-day="'+K+'" class="'+E.join(" ")+'"><button class="pika-button pika-day" type="button" data-pika-year="'+L+'" data-pika-month="'+F+'" data-pika-day="'+K+'">'+K+"</button></td>"},f=function(H,E,I){var G=new Date(I,0,1),F=Math.ceil((((new Date(I,E,H)-G)/86400000)+G.getDay()+1)/7);return'<td class="pika-week">'+F+"</td>"},e=function(F,E){return"<tr>"+(E?F.reverse():F).join("")+"</tr>"},b=function(E){return"<tbody>"+E.join("")+"</tbody>"},y=function(G){var F,E=[];if(G.showWeekNumber){E.push("<th></th>")}for(F=0;F<7;F++){E.push('<th scope="col"><abbr title="'+C(G,F)+'">'+C(G,F,true)+"</abbr></th>")}return"<thead>"+(G.isRTL?E.reverse():E).join("")+"</thead>"},s=function(R,O,P,N,T){var J,I,M,E=R._o,H=P===E.minYear,S=P===E.maxYear,L='<div class="pika-title">',G,Q,F=true,K=true;for(M=[],J=0;J<12;J++){M.push('<option value="'+(P===T?J-O:12+J-O)+'"'+(J===N?" selected":"")+((H&&J<E.minMonth)||(S&&J>E.maxMonth)?"disabled":"")+">"+E.i18n.months[J]+"</option>")}G='<div class="pika-label">'+E.i18n.months[N]+'<select class="pika-select pika-select-month">'+M.join("")+"</select></div>";if(l(E.yearRange)){J=E.yearRange[0];I=E.yearRange[1]+1}else{J=P-E.yearRange;I=1+P+E.yearRange}for(M=[];J<I&&J<=E.maxYear;J++){if(J>=E.minYear){M.push('<option value="'+J+'"'+(J===P?" selected":"")+">"+(J)+"</option>")}}Q='<div class="pika-label">'+P+E.yearSuffix+'<select class="pika-select pika-select-year">'+M.join("")+"</select></div>";if(E.showMonthAfterYear){L+=Q+G}else{L+=G+Q}if(H&&(N===0||E.minMonth>=N)){F=false}if(S&&(N===11||E.maxMonth<=N)){K=false}if(O===0){L+='<button class="pika-prev'+(F?"":" is-disabled")+'" type="button">'+E.i18n.previousMonth+"</button>"}if(O===(R._o.numberOfMonths-1)){L+='<button class="pika-next'+(K?"":" is-disabled")+'" type="button">'+E.i18n.nextMonth+"</button>"}return L+="</div>"},o=function(E,F){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+y(E)+b(F)+"</table>"},h=function(G){var E=this,H=E.config(G);E._onMouseDown=function(J){if(!E._v){return}J=J||window.event;var I=J.target||J.srcElement;if(!I){return}if(!a(I,"is-disabled")){if(a(I,"pika-button")&&!a(I,"is-empty")){E.setDate(new Date(I.getAttribute("data-pika-year"),I.getAttribute("data-pika-month"),I.getAttribute("data-pika-day")));if(H.bound){t(function(){E.hide();if(H.field){H.field.blur()}},100)}return}else{if(a(I,"pika-prev")){E.prevMonth()}else{if(a(I,"pika-next")){E.nextMonth()}}}}if(!a(I,"pika-select")){if(J.preventDefault){J.preventDefault()}else{J.returnValue=false;return false}}else{E._c=true}};E._onChange=function(J){J=J||window.event;var I=J.target||J.srcElement;if(!I){return}if(a(I,"pika-select-month")){E.gotoMonth(I.value)}else{if(a(I,"pika-select-year")){E.gotoYear(I.value)}}};E._onInputChange=function(J){var I;if(J.firedBy===E){return}if(j){I=A(H.field.value,H.format);I=(I&&I.isValid())?I.toDate():null}else{I=new Date(Date.parse(H.field.value))}E.setDate(B(I)?I:null);if(!E._v){E.show()}};E._onInputFocus=function(){E.show()};E._onInputClick=function(){E.show()};E._onInputBlur=function(){if(!E._c){E._b=t(function(){E.hide()},50)}E._c=false};E._onClick=function(J){J=J||window.event;var I=J.target||J.srcElement,K=I;if(!I){return}if(!d&&a(I,"pika-select")){if(!I.onchange){I.setAttribute("onchange","return;");r(I,"change",E._onChange)}}do{if(a(K,"pika-single")){return}}while((K=K.parentNode));if(E._v&&I!==H.trigger){E.hide()}};E.el=p.createElement("div");E.el.className="pika-single"+(H.isRTL?" is-rtl":"");r(E.el,"mousedown",E._onMouseDown,true);r(E.el,"change",E._onChange);if(H.field){if(H.container){H.container.appendChild(E.el)}else{if(H.bound){p.body.appendChild(E.el)}else{H.field.parentNode.insertBefore(E.el,H.field.nextSibling)}}r(H.field,"change",E._onInputChange);if(!H.defaultDate){if(j&&H.field.value){H.defaultDate=A(H.field.value,H.format).toDate()}else{H.defaultDate=new Date(Date.parse(H.field.value))}H.setDefaultDate=true}}var F=H.defaultDate;if(B(F)){if(H.setDefaultDate){E.setDate(F,true)}else{E.gotoDate(F)}}else{E.gotoDate(new Date())}if(H.bound){this.hide();E.el.className+=" is-bound";r(H.trigger,"click",E._onInputClick);r(H.trigger,"focus",E._onInputFocus);r(H.trigger,"blur",E._onInputBlur)}else{this.show()}};h.prototype={config:function(F){if(!this._o){this._o=x({},k,true)}var G=x(this._o,F,true);G.isRTL=!!G.isRTL;G.field=(G.field&&G.field.nodeName)?G.field:null;G.bound=!!(G.bound!==undefined?G.field&&G.bound:G.field);G.trigger=(G.trigger&&G.trigger.nodeName)?G.trigger:G.field;var E=parseInt(G.numberOfMonths,10)||1;G.numberOfMonths=E>4?4:E;if(!B(G.minDate)){G.minDate=false}if(!B(G.maxDate)){G.maxDate=false}if((G.minDate&&G.maxDate)&&G.maxDate<G.minDate){G.maxDate=G.minDate=false}if(G.minDate){z(G.minDate);G.minYear=G.minDate.getFullYear();G.minMonth=G.minDate.getMonth()}if(G.maxDate){z(G.maxDate);G.maxYear=G.maxDate.getFullYear();G.maxMonth=G.maxDate.getMonth()}if(l(G.yearRange)){var H=new Date().getFullYear()-10;G.yearRange[0]=parseInt(G.yearRange[0],10)||H;G.yearRange[1]=parseInt(G.yearRange[1],10)||H}else{G.yearRange=Math.abs(parseInt(G.yearRange,10))||k.yearRange;if(G.yearRange>100){G.yearRange=100}}return G},toString:function(E){return !B(this._d)?"":j?A(this._d).format(E||this._o.format):this._d.toDateString()},getMoment:function(){return j?A(this._d):null},setMoment:function(E,F){if(j&&A.isMoment(E)){this.setDate(E.toDate(),F)}},getDate:function(){return B(this._d)?new Date(this._d.getTime()):null},setDate:function(F,H){if(!F){this._d=null;return this.draw()}if(typeof F==="string"){F=new Date(Date.parse(F))}if(!B(F)){return}var G=this._o.minDate,E=this._o.maxDate;if(B(G)&&F<G){F=G}else{if(B(E)&&F>E){F=E}}this._d=new Date(F.getTime());z(this._d);this.gotoDate(this._d);if(this._o.field){this._o.field.value=this.toString();D(this._o.field,"change",{firedBy:this})}if(!H&&typeof this._o.onSelect==="function"){this._o.onSelect.call(this,this.getDate())}},gotoDate:function(G){var F=true;if(!B(G)){return}if(this.calendars){var I=new Date(this.calendars[0].year,this.calendars[0].month,1),E=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),H=G.getTime();E.setMonth(E.getMonth()+1);E.setDate(E.getDate()-1);F=(H<I.getTime()||E.getTime()<H)}if(F){this.calendars=[{month:G.getMonth(),year:G.getFullYear()}];if(this._o.mainCalendar==="right"){this.calendars[0].month+=1-this._o.numberOfMonths}}this.adjustCalendars()},adjustCalendars:function(){this.calendars[0]=i(this.calendars[0]);for(var E=1;E<this._o.numberOfMonths;E++){this.calendars[E]=i({month:this.calendars[0].month+E,year:this.calendars[0].year})}this.draw()},gotoToday:function(){this.gotoDate(new Date())},gotoMonth:function(E){if(!isNaN(E)){this.calendars[0].month=parseInt(E,10);this.adjustCalendars()}},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(E){if(!isNaN(E)){this.calendars[0].year=parseInt(E,10);this.adjustCalendars()}},setMinDate:function(E){this._o.minDate=E},setMaxDate:function(E){this._o.maxDate=E},draw:function(F){if(!this._v&&!F){return}var E=this._o,L=E.minYear,I=E.maxYear,J=E.minMonth,G=E.maxMonth,H="";if(this._y<=L){this._y=L;if(!isNaN(J)&&this._m<J){this._m=J}}if(this._y>=I){this._y=I;if(!isNaN(G)&&this._m>G){this._m=G}}for(var K=0;K<E.numberOfMonths;K++){H+='<div class="pika-lendar">'+s(this,K,this.calendars[K].year,this.calendars[K].month,this.calendars[0].year)+this.render(this.calendars[K].year,this.calendars[K].month)+"</div>"}this.el.innerHTML=H;if(E.bound){if(E.field.type!=="hidden"){t(function(){E.trigger.focus()},1)}}if(typeof this._o.onDraw==="function"){var M=this;t(function(){M._o.onDraw.call(M)},0)}},adjustPosition:function(){if(this._o.container){return}var M=this._o.trigger,K=M,F=this.el.offsetWidth,N=this.el.offsetHeight,J=window.innerWidth||p.documentElement.clientWidth,I=window.innerHeight||p.documentElement.clientHeight,G=window.pageYOffset||p.body.scrollTop||p.documentElement.scrollTop,H,L,E;if(typeof M.getBoundingClientRect==="function"){E=M.getBoundingClientRect();H=E.left+window.pageXOffset;L=E.bottom+window.pageYOffset}else{H=K.offsetLeft;L=K.offsetTop+K.offsetHeight;while((K=K.offsetParent)){H+=K.offsetLeft;L+=K.offsetTop}}if(H+F>J||(this._o.position.indexOf("right")>-1&&H-F+M.offsetWidth>0)){H=H-F+M.offsetWidth}if(L+N>I+G||(this._o.position.indexOf("top")>-1&&L-N-M.offsetHeight>0)){L=L-N-M.offsetHeight}this.el.style.cssText=["position: absolute","left: "+H+"px","top: "+L+"px"].join(";")},render:function(O,N){var F=this._o,I=new Date(),S=c(O,N),Q=new Date(O,N,1).getDay(),L=[],U=[];z(I);if(F.firstDay>0){Q-=F.firstDay;if(Q<0){Q+=7}}var T=S+Q,G=T;while(G>7){G-=7}T+=7-G;for(var K=0,E=0;K<T;K++){var P=new Date(O,N,1+(K-Q)),R=(F.minDate&&P<F.minDate)||(F.maxDate&&P>F.maxDate),H=B(this._d)?q(P,this._d):false,M=q(P,I),J=K<Q||K>=(S+Q);U.push(u(1+(K-Q),N,O,H,M,R,J));if(++E===7){if(F.showWeekNumber){U.unshift(f(K-Q,N,O))}L.push(e(U,F.isRTL));U=[];E=0}}return o(F,L)},isVisible:function(){return this._v},show:function(){if(!this._v){n(this.el,"is-hidden");this._v=true;this.draw();if(this._o.bound){r(p,"click",this._onClick);this.adjustPosition()}if(typeof this._o.onOpen==="function"){this._o.onOpen.call(this)}}},hide:function(){var E=this._v;if(E!==false){if(this._o.bound){v(p,"click",this._onClick)}this.el.style.cssText="";m(this.el,"is-hidden");this._v=false;if(E!==undefined&&typeof this._o.onClose==="function"){this._o.onClose.call(this)}}},destroy:function(){this.hide();v(this.el,"mousedown",this._onMouseDown,true);v(this.el,"change",this._onChange);if(this._o.field){v(this._o.field,"change",this._onInputChange);if(this._o.bound){v(this._o.trigger,"click",this._onInputClick);v(this._o.trigger,"focus",this._onInputFocus);v(this._o.trigger,"blur",this._onInputBlur)}}if(this.el.parentNode){this.el.parentNode.removeChild(this.el)}}};return h}));